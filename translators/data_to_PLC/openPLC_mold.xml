<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="" productName="OpenIXl generator" productVersion="OpenIXL generator v0.1" companyURL="https://github.com/Bleebop/IXL_project" creationDateTime="{creation_date_time}" />
  <contentHeader name="{project_name}" modificationDateTime="{creation_date_time}">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
  </contentHeader>
  <types>
    <dataTypes>
      <dataType name="TC">
        <baseType>
          <enum>
            <values>
              <value name="NIL" value="-1" />
{tc_enum_values}
            </values>
          </enum>
        </baseType>
      </dataType>
      <dataType name="SWITCH">
        <baseType>
          <enum>
            <values>
              <value name="NIL" value="-1" />
{switch_enum_values}
            </values>
          </enum>
        </baseType>
      </dataType>
      <dataType name="SIGNAL">
        <baseType>
          <enum>
            <values>
              <value name="NIL" value="-1" />
{signal_enum_values}
            </values>
          </enum>
        </baseType>
      </dataType>
      <dataType name="CLOSED_SIGNAL">
        <baseType>
          <enum>
            <values>
              <value name="NIL" value="-1" />
{closed_signal_enum_values}
            </values>
          </enum>
        </baseType>
      </dataType>
      <dataType name="TRAIN_STATE">
        <baseType>
          <struct>
            <variable name="exists">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="rear_pos">
              <type>
                <derived name="TC" />
              </type>
            </variable>
            <variable name="front_pos">
              <type>
                <derived name="TC" />
              </type>
            </variable>
            <variable name="orientation">
              <type>
                <derived name="DIR" />
              </type>
            </variable>
            <variable name="stopped">
              <type>
                <BOOL />
              </type>
            </variable>
          </struct>
        </baseType>
      </dataType>
      <dataType name="DIR">
        <baseType>
          <enum>
            <values>
              <value name="NIL" value="-1" />
              <value name="DOWN" value="0" />
              <value name="UP" value="1" />
            </values>
          </enum>
        </baseType>
      </dataType>
      <dataType name="SW_POS_t">
        <baseType>
          <enum>
            <values>
              <value name="NIL" value="-1" />
              <value name="LEFT" value="1" />
              <value name="RIGHT" value="2" />
              <value name="INTERMEDIATE" value="3" />
            </values>
          </enum>
        </baseType>
      </dataType>
      <dataType name="ENTRY_POINT_t">
        <baseType>
          <struct>
            <variable name="tc">
              <type>
                <derived name="TC" />
              </type>
            </variable>
            <variable name="orientation">
              <type>
                <derived name="DIR" />
              </type>
            </variable>
          </struct>
        </baseType>
      </dataType>
      <dataType name="EXIT_POINT_t">
        <baseType>
          <struct>
            <variable name="tc">
              <type>
                <derived name="TC" />
              </type>
            </variable>
            <variable name="orientation">
              <type>
                <derived name="DIR" />
              </type>
            </variable>
          </struct>
        </baseType>
      </dataType>
      <dataType name="ROUTE">
        <baseType>
          <enum>
            <values>
              <value name="NIL" value="-1" />
{route_enum_values}
            </values>
          </enum>
        </baseType>
      </dataType>
      <dataType name="STATIC_ROUTE">
        <baseType>
          <enum>
            <values>
              <value name="NIL" value="-1" />
{static_route_enum_values}
            </values>
          </enum>
        </baseType>
      </dataType>
    </dataTypes>
    <pous>
      <pou name="PLC_safety" pouType="program">
        <interface>
          <localVars>
            <variable name="route_state">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nRoute" />
                  <baseType>
                    <derived name="route_state" />
                  </baseType>
                </array>
              </type>
            </variable>
            <variable name="Approaching_train">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nRoute" />
                  <baseType>
                    <derived name="Approaching_train" />
                  </baseType>
                </array>
              </type>
            </variable>
            <variable name="switch_locked">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nSwitch" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
            </variable>
          </localVars>
          <localVars constant="true">
            <variable name="DELAY_DESTRUCT">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nRoute" />
                  <baseType>
                    <TIME />
                  </baseType>
                </array>
              </type>
              <initialValue>
                <arrayValue>
{delay_destruct_values}
                </arrayValue>
              </initialValue>
            </variable>
          </localVars>
          <outputVars>
            <variable name="route_open">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nRoute" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
            </variable>
            <variable name="route_entry_authorization">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nRoute" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> The starting signal of the route can be opened to go through this route</xhtml>
              </documentation>
            </variable>
            <variable name="signal_open_maneuver">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nSignal" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Signal is opened for CBTC trains (downstream block occupation is ignored)</xhtml>
              </documentation>
            </variable>
            <variable name="switch_command_left">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nSwitch" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
            </variable>
            <variable name="switch_command_right">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nSwitch" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
            </variable>
          </outputVars>
        </interface>
        <body>
          <FBD>
{safety_PLC_FBD}
          </FBD>
        </body>
      </pou>
      <pou name="AUTO_DESTRUCT" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="route_open">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="last_TTD_occupied">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="destination_TTD_occupied">
              <type>
                <BOOL />
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="route_auto_destruct_command">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
        </interface>
        <body>
          <SFC>
            <step localId="0" initialStep="true" name="Init">
              <position x="0" y="0" />
              <connectionPointIn />
              <connectionPointOut formalParameter="sfc" />
              <connectionPointOutAction formalParameter="x" />
            </step>
            <actionBlock localId="2">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="0" />
              </connectionPointIn>
              <action localId="1" qualifier="R" duration="" indicator="">
                <relPosition x="0" y="0" />
                <reference name="route_auto_destruc_command" />
                <connectionPointOut />
              </action>
            </actionBlock>
            <inVariable localId="3">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>route_open</expression>
            </inVariable>
            <transition localId="4">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="0" formalParameter="sfc" />
              </connectionPointIn>
              <condition>
                <connectionPointIn>
                  <connection refLocalId="3" />
                </connectionPointIn>
              </condition>
            </transition>
            <step localId="5" name="Route_opened">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="4" />
              </connectionPointIn>
              <connectionPointOut formalParameter="sfc" />
            </step>
            <selectionDivergence localId="6">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="5" />
              </connectionPointIn>
              <connectionPointOut formalParameter="sfc" />
              <connectionPointOut formalParameter="sfc" />
            </selectionDivergence>
            <inVariable localId="7">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>last_TTD_occupied and NOT destination_TTD_occupied and route_open</expression>
            </inVariable>
            <transition localId="8">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="6" formalParameter="sfc" />
              </connectionPointIn>
              <condition>
                <connectionPointIn>
                  <connection refLocalId="7" />
                </connectionPointIn>
              </condition>
            </transition>
            <inVariable localId="9">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>NOT route_open</expression>
            </inVariable>
            <transition localId="10">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="6" formalParameter="sfc" />
              </connectionPointIn>
              <condition>
                <connectionPointIn>
                  <connection refLocalId="9" />
                </connectionPointIn>
              </condition>
            </transition>
            <jumpStep localId="11" targetName="Init">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="10" />
              </connectionPointIn>
            </jumpStep>
            <selectionConvergence localId="12">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="8" formalParameter="sfc" />
              </connectionPointIn>
              <connectionPointIn>
                <connection refLocalId="11" formalParameter="sfc" />
              </connectionPointIn>
              <connectionPointOut />
            </selectionConvergence>
            <step localId="13" name="Train_on_last_TTD">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="12" />
              </connectionPointIn>
              <connectionPointOut formalParameter="sfc" />
            </step>
            <selectionDivergence localId="14">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="13" />
              </connectionPointIn>
              <connectionPointOut formalParameter="sfc" />
              <connectionPointOut formalParameter="sfc" />
            </selectionDivergence>
            <inVariable localId="15">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>last_TTD_occupied and destination_TTD_occupied and route_open</expression>
            </inVariable>
            <transition localId="16">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="14" formalParameter="sfc" />
              </connectionPointIn>
              <condition>
                <connectionPointIn>
                  <connection refLocalId="15" />
                </connectionPointIn>
              </condition>
            </transition>
            <inVariable localId="17">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>NOT last_TTD_occupied OR NOT route_open</expression>
            </inVariable>
            <transition localId="18">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="14" formalParameter="sfc" />
              </connectionPointIn>
              <condition>
                <connectionPointIn>
                  <connection refLocalId="17" />
                </connectionPointIn>
              </condition>
            </transition>
            <jumpStep localId="19" targetName="Init">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="18" />
              </connectionPointIn>
            </jumpStep>
            <selectionConvergence localId="20">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="16" formalParameter="sfc" />
              </connectionPointIn>
              <connectionPointIn>
                <connection refLocalId="19" formalParameter="sfc" />
              </connectionPointIn>
              <connectionPointOut />
            </selectionConvergence>
            <step localId="21" name="Train_entered_destination">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="20" />
              </connectionPointIn>
              <connectionPointOut formalParameter="sfc" />
            </step>
            <selectionDivergence localId="22">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="21" />
              </connectionPointIn>
              <connectionPointOut formalParameter="sfc" />
              <connectionPointOut formalParameter="sfc" />
            </selectionDivergence>
            <inVariable localId="23">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>NOT last_TTD_occupied and destination_TTD_occupied and route_open</expression>
            </inVariable>
            <transition localId="24">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="22" formalParameter="sfc" />
              </connectionPointIn>
              <condition>
                <connectionPointIn>
                  <connection refLocalId="23" />
                </connectionPointIn>
              </condition>
            </transition>
            <inVariable localId="25">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>NOT destination_TTD_occupied OR NOT route_open</expression>
            </inVariable>
            <transition localId="26">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="22" formalParameter="sfc" />
              </connectionPointIn>
              <condition>
                <connectionPointIn>
                  <connection refLocalId="25" />
                </connectionPointIn>
              </condition>
            </transition>
            <jumpStep localId="27" targetName="Init">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="26" />
              </connectionPointIn>
            </jumpStep>
            <selectionConvergence localId="28">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="24" formalParameter="sfc" />
              </connectionPointIn>
              <connectionPointIn>
                <connection refLocalId="27" formalParameter="sfc" />
              </connectionPointIn>
              <connectionPointOut />
            </selectionConvergence>
            <step localId="29" name="Train_left_route">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="28" />
              </connectionPointIn>
              <connectionPointOut formalParameter="sfc" />
              <connectionPointOutAction formalParameter="x" />
            </step>
            <actionBlock localId="31">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="29" />
              </connectionPointIn>
              <action localId="30" qualifier="S" duration="" indicator="">
                <relPosition x="0" y="0" />
                <reference name="route_auto_destruc_command" />
                <connectionPointOut />
              </action>
            </actionBlock>
            <inVariable localId="32">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>TRUE</expression>
            </inVariable>
            <transition localId="33">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="29" formalParameter="sfc" />
              </connectionPointIn>
              <condition>
                <connectionPointIn>
                  <connection refLocalId="32" />
                </connectionPointIn>
              </condition>
            </transition>
            <jumpStep localId="34" targetName="Init">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="33" />
              </connectionPointIn>
            </jumpStep>
          </SFC>
        </body>
      </pou>
      <pou name="route_state" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="route_formation_demand">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="incompatible_routes_demand">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="incompatible_routes_opened">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="route_destruction_demand">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Transit_TCs_free">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="risk_of_approaching_train">
              <type>
                <BOOL />
              </type>
            </variable>
          </inputVars>
          <localVars>
            <variable name="SR_route">
              <type>
                <derived name="SR" />
              </type>
            </variable>
          </localVars>
          <outputVars>
            <variable name="route_open">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
        </interface>
        <body>
          <FBD>
            <inVariable localId="10000000001">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>route_formation_demand</expression>
            </inVariable>
            <inVariable localId="10000000002">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>incompatible_routes_demand</expression>
            </inVariable>
            <block localId="10000000003" typeName="NOT">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000002" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="10000000004">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>incompatible_routes_opened</expression>
            </inVariable>
            <block localId="10000000005" typeName="NOT">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000004" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="10000000006">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>route_destruction_demand</expression>
            </inVariable>
            <block localId="10000000007" typeName="NOT">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000006" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <block localId="10000000008" typeName="AND">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000001" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In2">
                  <connectionPointIn>
                    <connection refLocalId="10000000003" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In3">
                  <connectionPointIn>
                    <connection refLocalId="10000000005" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In4">
                  <connectionPointIn>
                    <connection refLocalId="10000000007" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="10000000009">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>route_destruction_demand</expression>
            </inVariable>
            <inVariable localId="10000000010">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>Transit_TCs_free</expression>
            </inVariable>
            <inVariable localId="10000000011">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>risk_of_approaching_train</expression>
            </inVariable>
            <block localId="10000000012" typeName="NOT">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000011" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <block localId="10000000013" typeName="AND">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000009" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In2">
                  <connectionPointIn>
                    <connection refLocalId="10000000010" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In3">
                  <connectionPointIn>
                    <connection refLocalId="10000000012" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <block localId="10000000014" typeName="SR" instanceName="SR_route">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="SET1">
                  <connectionPointIn>
                    <connection refLocalId="10000000008" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="RESET">
                  <connectionPointIn>
                    <connection refLocalId="10000000013" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Q1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <outVariable localId="10000000015">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="10000000014" formalParameter="Q1" />
              </connectionPointIn>
              <expression>route_open</expression>
            </outVariable>
          </FBD>
        </body>
      </pou>
      <pou name="Approaching_train" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="approach_area_occupied">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="origin_signal_open">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="DELAY_DESTRUCT">
              <type>
                <TIME />
              </type>
            </variable>
            <variable name="route_destruction_approach_ack">
              <type>
                <BOOL />
              </type>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="risk_of_approaching_train">
              <type>
                <BOOL />
              </type>
            </variable>
          </outputVars>
          <localVars>
            <variable name="TON_approach_timer">
              <type>
                <derived name="TON" />
              </type>
            </variable>
            <variable name="SR_approaching_train">
              <type>
                <derived name="SR" />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <FBD>
            <inVariable localId="10000000001">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>approach_area_occupied</expression>
            </inVariable>
            <inVariable localId="10000000002">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>origin_signal_open</expression>
            </inVariable>
            <inVariable localId="10000000003">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>route_destruction_approach_ack</expression>
            </inVariable>
            <block localId="10000000004" typeName="NOT">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000003" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <block localId="10000000005" typeName="AND">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000001" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In2">
                  <connectionPointIn>
                    <connection refLocalId="10000000002" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In3">
                  <connectionPointIn>
                    <connection refLocalId="10000000004" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="10000000006">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>origin_signal_open</expression>
            </inVariable>
            <block localId="10000000007" typeName="NOT">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000006" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="10000000008">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>DELAY_DESTRUCT</expression>
            </inVariable>
            <block localId="10000000009" typeName="TON" instanceName="TON_approach_timer">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="IN">
                  <connectionPointIn>
                    <connection refLocalId="10000000007" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="PT">
                  <connectionPointIn>
                    <connection refLocalId="10000000008" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Q">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="10000000010">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>approach_area_occupied</expression>
            </inVariable>
            <block localId="10000000011" typeName="NOT">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000010" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <inVariable localId="10000000012">
              <position x="0" y="0" />
              <connectionPointOut />
              <expression>route_destruction_approach_ack</expression>
            </inVariable>
            <block localId="10000000013" typeName="OR">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="In1">
                  <connectionPointIn>
                    <connection refLocalId="10000000009" formalParameter="Q" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In2">
                  <connectionPointIn>
                    <connection refLocalId="10000000011" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="In3">
                  <connectionPointIn>
                    <connection refLocalId="10000000012" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Out1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <block localId="10000000014" typeName="SR" instanceName="SR_approaching_train">
              <position x="0" y="0" />
              <inputVariables>
                <variable formalParameter="SET1">
                  <connectionPointIn>
                    <connection refLocalId="10000000005" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
                <variable formalParameter="RESET">
                  <connectionPointIn>
                    <connection refLocalId="10000000013" formalParameter="Out1" />
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables />
              <outputVariables>
                <variable formalParameter="Q1">
                  <connectionPointOut />
                </variable>
              </outputVariables>
            </block>
            <outVariable localId="10000000015">
              <position x="0" y="0" />
              <connectionPointIn>
                <connection refLocalId="10000000014" formalParameter="Q1" />
              </connectionPointIn>
              <expression>risk_of_approaching_train</expression>
            </outVariable>
          </FBD>
        </body>
      </pou>
      <pou name="PLC_not_safety" pouType="program">
        <interface>
          <localVars>
            <variable name="AUTO_DESTRUCT">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nRoute" />
                  <baseType>
                    <derived name="AUTO_DESTRUCT" />
                  </baseType>
                </array>
              </type>
            </variable>
          </localVars>
          <outputVars>
            <variable name="route_destruction_demand">
              <type>
                <array>
                  <dimension lower="1" upper="var_g.nRoute" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
            </variable>
          </outputVars>
        </interface>
        <body>
          <FBD>
{non_safety_PLC_FBD}
          </FBD>
        </body>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations>
      <configuration name="Device">
        <resource name="Application">
          <task name="MainTask" interval="{plc_period}" priority="1">
            <pouInstance name="non_safety_PLC" typeName="">
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml" />
              </documentation>
            </pouInstance>
            <pouInstance name="safety_PLC" typeName="">
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml" />
              </documentation>
            </pouInstance>
          </task>
          <globalVars name="var_g">
            <variable name="TC_occupied">
              <type>
                <array>
                  <dimension lower="1" upper="nTC" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> /!\ safety critical /!\</xhtml>
              </documentation>
            </variable>
            <variable name="switch_detected_left">
              <type>
                <array>
                  <dimension lower="1" upper="nSwitch" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> /!\ safety critical /!\</xhtml>
              </documentation>
            </variable>
            <variable name="switch_detected_right">
              <type>
                <array>
                  <dimension lower="1" upper="nSwitch" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> /!\ safety critical /!\</xhtml>
              </documentation>
            </variable>
            <variable name="switch_manual_override">
              <type>
                <array>
                  <dimension lower="1" upper="nSwitch" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Allows a switch to be moved on site /!\ safety critical /!\</xhtml>
              </documentation>
            </variable>
            <variable name="close_command">
              <type>
                <array>
                  <dimension lower="1" upper="nSignal" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Force a signal to be closed</xhtml>
              </documentation>
            </variable>
            <variable name="ignore_TC_occupation">
              <type>
                <array>
                  <dimension lower="1" upper="nTC" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Allow to destruct a route even if this TC is occupied. /!\ safety critical /!\</xhtml>
              </documentation>
            </variable>
            <variable name="ignore_approach">
              <type>
                <array>
                  <dimension lower="1" upper="nRoute" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Allow to destruct a route even if there is a risk of a train entering. /!\ safety critical /!\</xhtml>
              </documentation>
            </variable>
            <variable name="route_formation_demand">
              <type>
                <array>
                  <dimension lower="1" upper="nRoute" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
            </variable>
            <variable name="route_destruct_manual_demand">
              <type>
                <array>
                  <dimension lower="1" upper="nRoute" />
                  <baseType>
                    <BOOL />
                  </baseType>
                </array>
              </type>
            </variable>
            <variable name="nTC">
              <type>
                <INT />
              </type>
              <initialValue>
                <simpleValue value="{n_tvd}" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Track Circuits used by the IXL</xhtml>
              </documentation>
            </variable>
            <variable name="nRoute">
              <type>
                <INT />
              </type>
              <initialValue>
                <simpleValue value="{n_route}" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Routes that can be formed and destroyed</xhtml>
              </documentation>
            </variable>
            <variable name="nSwitch">
              <type>
                <INT />
              </type>
              <initialValue>
                <simpleValue value="{n_switch}" />
              </initialValue>
            </variable>
            <variable name="nSignal">
              <type>
                <INT />
              </type>
              <initialValue>
                <simpleValue value="{n_signal}" />
              </initialValue>
            </variable>
            <variable name="nClosedSignal">
              <type>
                <INT />
              </type>
              <initialValue>
                <simpleValue value="{n_closed_signal}" />
              </initialValue>
            </variable>
            <variable name="nRouteStatic">
              <type>
                <INT />
              </type>
              <initialValue>
                <simpleValue value="{n_static_route}" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> "Routes" that are always formed</xhtml>
              </documentation>
            </variable>
          </globalVars>
        </resource>
        <addData>
          <data name="Device" handleUnknown="discard">
            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
              <DeviceType>
                <DeviceIdentification>
                  <Type>4096</Type>
                  <Id>0000 0004</Id>
                  <Version>3.5.20.0</Version>
                </DeviceIdentification>
                <Connector moduleType="256" interface="Common.PCI" connectorId="0">
                  <HostParameterSet />
                </Connector>
                <Connector moduleType="769" interface="SafetyInterface" connectorId="1">
                  <HostParameterSet />
                </Connector>
                <DeviceParameterSet />
              </DeviceType>
            </Device>
          </data>
          <data name="configurations" handleUnknown="discard">
            <configurations />
          </data>
        </addData>
      </configuration>
    </configurations>
  </instances>
</project>